# Application Insights сЃГсѓ░уб║УфЇ - УХЁсѓисЃ│сЃЌсЃФТЅІжає

**уЏ«уџё**: auth-verify-tokenсЂ«401сѓесЃЕсЃ╝сѓњУф┐ТЪ╗сЂЎсѓІ

---

## ­Ъј» Тюђсѓѓу░АтЇўсЂфТќ╣Т│Ћ№╝ѕтидтЂ┤сЂ«сЃєсЃ╝сЃќсЃФсЂІсѓЅжЂИТіъ№╝Ѕ

### Тќ╣Т│Ћ1: `traces`сЃєсЃ╝сЃќсЃФсѓњсѓ»сЃфсЃЃсѓ»№╝ѕТјетЦе№╝Ѕ

1. **тидтЂ┤сЂ«сЃісЃЊсѓ▓сЃ╝сѓисЃДсЃ│сЃџсѓцсЃ│**сЂДсђї**traces**сђЇсѓњТјбсЂЎ
2. сђї**traces**сђЇсѓњ**сЃђсЃќсЃФсѓ»сЃфсЃЃсѓ»**сЂЙсЂЪсЂ»**тЈ│сѓ»сЃфсЃЃсѓ» Рєњ "Use in query"**
3. УЄфтІЋуџёсЂФсѓ»сѓесЃфсЂїућЪТѕљсЂЋсѓїсѓІ
4. сѓ»сѓесЃфсѓњС╗ЦСИІсЂ«сѓѕсЂєсЂФ**уиежЏє**№╝џ

```
traces
| where timestamp > ago(1h)
| where message contains "AuthVerifyToken" or operation_Name contains "auth-verify-token"
| order by timestamp desc
| take 50
```

5. **т«ЪУАї**сЃюсѓ┐сЃ│сѓњсѓ»сЃфсЃЃсѓ»№╝ѕсЂЙсЂЪсЂ» **Shift + Enter**№╝Ѕ

---

### Тќ╣Т│Ћ2: `requests`сЃєсЃ╝сЃќсЃФсѓњсѓ»сЃфсЃЃсѓ»№╝ѕ401сѓесЃЕсЃ╝уб║УфЇуће№╝Ѕ

1. **тидтЂ┤сЂ«сЃісЃЊсѓ▓сЃ╝сѓисЃДсЃ│сЃџсѓцсЃ│**сЂДсђї**requests**сђЇсѓњТјбсЂЎ
2. сђї**requests**сђЇсѓњ**сЃђсЃќсЃФсѓ»сЃфсЃЃсѓ»**сЂЙсЂЪсЂ»**тЈ│сѓ»сЃфсЃЃсѓ» Рєњ "Use in query"**
3. УЄфтІЋуџёсЂФсѓ»сѓесЃфсЂїућЪТѕљсЂЋсѓїсѓІ
4. сѓ»сѓесЃфсѓњС╗ЦСИІсЂ«сѓѕсЂєсЂФ**уиежЏє**№╝џ

```
requests
| where timestamp > ago(1h)
| where url contains "auth-verify-token"
| where resultCode == 401
| order by timestamp desc
| take 20
```

5. **т«ЪУАї**сЃюсѓ┐сЃ│сѓњсѓ»сЃфсЃЃсѓ»№╝ѕсЂЙсЂЪсЂ» **Shift + Enter**№╝Ѕ

---

### Тќ╣Т│Ћ3: Тќ░сЂЌсЂёсѓ»сѓесЃфсѓ┐сЃќсѓњжќІсЂЈ

1. ућ╗жЮбСИіжЃесЂ«сђї**+**сђЇсЃюсѓ┐сЃ│сѓњсѓ»сЃфсЃЃсѓ»№╝ѕТќ░сЂЌсЂёсѓ»сѓесЃфсѓ┐сЃќсѓњжќІсЂЈ№╝Ѕ
2. тидтЂ┤сЂ«сђї**traces**сђЇсѓњсѓ»сЃфсЃЃсѓ»
3. СИіУеўсЂ«сѓ»сѓесЃфсѓњУ▓╝сѓіС╗ўсЂЉсЂдуиежЏє
4. **т«ЪУАї**сЃюсѓ┐сЃ│сѓњсѓ»сЃфсЃЃсѓ»

---

## ­ЪЊЮ сѓ»сѓесЃфсЂ«сѓ│сЃћсЃ╝уће

### auth-verify-tokenсЂ«сЂЎсЂ╣сЂдсЂ«сЃГсѓ░

```
traces
| where timestamp > ago(1h)
| where message contains "AuthVerifyToken" or operation_Name contains "auth-verify-token"
| order by timestamp desc
| take 50
```

### 401сѓесЃЕсЃ╝сЂ«сЃфсѓ»сѓесѓ╣сЃѕ

```
requests
| where timestamp > ago(1h)
| where url contains "auth-verify-token"
| where resultCode == 401
| order by timestamp desc
| take 20
```

### сЂЎсЂ╣сЂдсЂ«СЙІтцќ

```
exceptions
| where timestamp > ago(1h)
| where operation_Name contains "auth-verify-token"
| order by timestamp desc
| take 20
```

---

## РюЁ т«ЪУАїтЙїсЂ«уб║УфЇсЃЮсѓцсЃ│сЃѕ

### сЃГсѓ░сЂїУАеуц║сЂЋсѓїсЂЪта┤тљѕ

- `[AuthVerifyToken]` сЂДтДІсЂЙсѓІсЃГсѓ░сѓњТјбсЂЎ
- сѓесЃЕсЃ╝сЃАсЃЃсѓ╗сЃ╝сѓИсѓњуб║УфЇ
- `Token verification failed` сЂфсЂЕсЂ«сѓесЃЕсЃ╝сѓњТјбсЂЎ

### сЃГсѓ░сЂїУАеуц║сЂЋсѓїсЂфсЂёта┤тљѕ

- ТЎѓжќЊу»ётЏ▓сѓњт║ЃсЂњсѓІ№╝ѕ`ago(24h)`сЂФтцЅТЏ┤№╝Ѕ
- сЂЙсЂЪсЂ»сђЂжќбТЋ░сЂїт«ЪУАїсЂЋсѓїсЂдсЂёсЂфсЂётЈ»УЃйТђД

---

## ­Ъј» ТјетЦеТЅІжає

1. **тидтЂ┤сЂ«сђїtracesсђЇсѓњсЃђсЃќсЃФсѓ»сЃфсЃЃсѓ»**
2. **СИіУеўсЂ«сѓ»сѓесЃфсѓњУ▓╝сѓіС╗ўсЂЉсЂдуиежЏє**
3. **т«ЪУАїсЃюсѓ┐сЃ│сѓњсѓ»сЃфсЃЃсѓ»**
4. **ухљТъюсѓњуб║УфЇ**

---

**СйюТѕљУђЁ**: AI Assistant  
**ТюђухѓТЏ┤Тќ░**: 2025-11-30


